/**
 * Get DealState By ID Query
 * Generated by entity codegen - do not edit directly
 *
 * EXTENSION POINTS (add query logic here):
 * - Authorization: Check if user can access this specific record
 * - Enrichment: Add computed fields or related data
 * - Caching: Add cache layer for frequently accessed records
 */

import { Inject, Injectable, NotFoundException } from '@nestjs/common';
import { DEALSTATE_REPOSITORY } from '../../../constants';
import type { IDealStateRepository, DealStateWith } from '../../../domain';
import { DealState } from '../../../domain';

@Injectable()
export class GetDealStateByIdQuery {
	constructor(
		@Inject(DEALSTATE_REPOSITORY)
		private readonly dealStateRepository: IDealStateRepository,
	) {}

	async execute(id: string, include?: DealStateWith): Promise<DealState> {
		// TODO: Add authorization check if needed (row-level security)

		const entity = await this.dealStateRepository.findById(id, include);
		if (!entity) {
			throw new NotFoundException(`DealState with id ${id} not found`);
		}

		// TODO: Add enrichment or computed fields if needed

		return entity;
	}
}
