/**
 * User Drizzle Schema
 * Generated by entity codegen - do not edit directly
 */

import { relations } from 'drizzle-orm';
import {
	pgTable,
	uuid,
	varchar,
	index,
} from 'drizzle-orm/pg-core';
import { persons } from './persons.schema';
import { opportunities } from './opportunities.schema';

export const users = pgTable('users', {
	id: uuid('id').defaultRandom().primaryKey(),
	tenantId: uuid('tenant_id').notNull(),
	email: varchar('email', { length: 255 }).notNull(),
	personId: uuid('person_id').references(() => persons.id),
}, (table) => ({
	personIdIdx: index('idx_users_person_id').on(table.personId),
	tenantIdIdx: index('idx_users_tenant_id').on(table.tenantId),
	emailIdx: index('idx_users_email').on(table.email),
}));

export const usersRelations = relations(users, ({ one, many }) => ({
	person: one(persons, {
		fields: [users.personId],
		references: [persons.id],
	}),
	owned_opportunities: many(opportunities),
}));

export type UserRecord = typeof users.$inferSelect;
export type NewUserRecord = typeof users.$inferInsert;
