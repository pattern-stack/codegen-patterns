/**
 * DealState Drizzle Schema
 * Generated by entity codegen - do not edit directly
 */

import { relations } from 'drizzle-orm';
import {
	integer,
	pgEnum,
	pgTable,
	uuid,
	varchar,
	index,
} from 'drizzle-orm/pg-core';
import { opportunities } from './opportunities.schema';

// Enum definitions (Postgres only)
export const stateTypeEnum = pgEnum('state_type', ['open', 'won', 'lost', 'stalled']);

export const deal_states = pgTable('deal_states', {
	id: uuid('id').defaultRandom().primaryKey(),
	tenantId: uuid('tenant_id'),
	name: varchar('name', { length: 50 }).notNull(),
	displayName: varchar('display_name', { length: 100 }).notNull(),
	stateType: stateTypeEnum('state_type').notNull(),
	sortOrder: integer('sort_order').notNull(),
	probabilityDefault: integer('probability_default'),
	color: varchar('color', { length: 20 }),
}, (table) => ({
	tenantIdIdx: index('idx_deal_states_tenant_id').on(table.tenantId),
}));

export const deal_statesRelations = relations(deal_states, ({ many }) => ({
	opportunities: many(opportunities),
}));

export type DealStateRecord = typeof deal_states.$inferSelect;
export type NewDealStateRecord = typeof deal_states.$inferInsert;
