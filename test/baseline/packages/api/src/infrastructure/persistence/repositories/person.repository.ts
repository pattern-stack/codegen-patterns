/**
 * Person Repository Implementation
 * Generated by entity codegen - do not edit directly
 */

import { Injectable } from '@nestjs/common';
import { eq } from 'drizzle-orm';
import { BaseRepository, type BehaviorConfig } from '../base.repository';
import type {
	CreatePersonInput,
	IPersonRepository,
	UpdatePersonInput,
} from '../../../domain';
import { Person } from '../../../domain';
import { persons } from '../drizzle';

@Injectable()
export class PersonRepository
	extends BaseRepository<
		typeof persons,
		Person,
		CreatePersonInput,
		UpdatePersonInput
	>
	implements IPersonRepository
{
	protected readonly table = persons;

	// Behaviors declared in YAML -> generated as config object
	protected readonly behaviors: BehaviorConfig = {
		timestamps: false,
		softDelete: false,
		userTracking: false,
	};

	protected toEntity(record: typeof persons.$inferSelect): Person {
		return Person.fromRecord(record);
	}
}
