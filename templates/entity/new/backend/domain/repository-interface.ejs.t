---
to: <%= outputPaths.repositoryInterface %>
force: true
---
<% if (outputPaths.repositoryInterface) { -%>
/**
 * <%= className %> Repository Interface
 * Generated by entity codegen - do not edit directly
 */

import type { <%= className %> } from './<%= name %>.entity';
<% if (hasEntityRefFields) { -%>
import type { EntityType } from '../../infrastructure/persistence/drizzle/entity-types.schema';
<% } -%>
<% if (hasRelationships) { -%>

/**
 * Type-safe eager loading options.
 * Pass to repository methods to include related entities.
 */
export type <%= className %>With = {
<% relationships.forEach((rel) => { -%>
	<%= rel.name %>?: boolean;
<% }) -%>
};
<% } -%>

/**
 * Domain-level input types for repository operations.
 */
export type Create<%= className %>Input = {
<% fields.forEach((field) => { -%>
<% if (field.required) { -%>
	<%= field.camelName %>: <%- field.tsType %>;
<% } else if (field.nullable) { -%>
	<%= field.camelName %>?: <%- field.tsType %> | null;
<% } else { -%>
	<%= field.camelName %>?: <%- field.tsType %>;
<% } -%>
<% }) -%>
};

export type Update<%= className %>Input = Partial<Create<%= className %>Input>;

export interface I<%= className %>Repository {
	create(input: Create<%= className %>Input): Promise<<%= className %>>;
	findById(id: string<%= hasRelationships ? `, include?: ${className}With` : '' %>): Promise<<%= className %> | null>;
	findAll(<%= hasRelationships ? `include?: ${className}With` : '' %>): Promise<<%= className %>[]>;
	update(id: string, input: Update<%= className %>Input): Promise<<%= className %> | null>;
	delete(id: string): Promise<<%= className %> | null>;
<% if (hasSoftDelete) { -%>
	// Soft delete recovery methods
	restore(id: string): Promise<<%= className %> | null>;
	findWithDeleted(): Promise<<%= className %>[]>;
	findOnlyDeleted(): Promise<<%= className %>[]>;
<% } -%>
<% belongsToRelations.forEach((rel) => { -%>
	findBy<%= rel.foreignKeyPascal %>(id: string<%= hasRelationships ? `, include?: ${className}With` : '' %>): Promise<<%= className %>[]>;
<% }) -%>
<% entityRefFields.forEach((ref) => { -%>
	findBy<%= ref.pascalName %>(entityType: EntityType, entityId: string<%= hasRelationships ? `, include?: ${className}With` : '' %>): Promise<<%= className %>[]>;
<% }) -%>
}
<% } -%>
