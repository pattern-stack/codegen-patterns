---
to: "<%= exposeTrpc ? `${basePaths.backendSrc}/presentation/trpc/${plural}.router.ts` : '' %>"
force: true
---
<% if (exposeTrpc) { -%>
/**
 * <%= classNamePlural %> tRPC Router
 * Generated by entity codegen - do not edit directly
 *
 * Add this router to TrpcModule providers:
 *   providers: [..., <%= classNamePlural %>Router],
 */

import { Injectable } from '@nestjs/common';
import { Router, Query, Mutation, Input } from '@mguay/nestjs-trpc';
import { z } from 'zod';
import {
	create<%= className %>Schema,
	update<%= className %>Schema,
} from '<%= imports.controllerToSchemas %>';
import { <%= getByIdQueryClass %> } from '<%= imports.controllerToGetByIdQuery %>';
import { <%= listQueryClass %> } from '<%= imports.controllerToListQuery %>';
import { <%= createCommandClass %> } from '<%= imports.controllerToCreateCommand %>';
import { <%= updateCommandClass %> } from '<%= imports.controllerToUpdateCommand %>';
import { <%= deleteCommandClass %> } from '<%= imports.controllerToDeleteCommand %>';

@Injectable()
@Router({ alias: '<%= plural %>' })
export class <%= classNamePlural %>Router {
	constructor(
		private readonly get<%= className %>ById: <%= getByIdQueryClass %>,
		private readonly list<%= classNamePlural %>: <%= listQueryClass %>,
		private readonly create<%= className %>: <%= createCommandClass %>,
		private readonly update<%= className %>: <%= updateCommandClass %>,
		private readonly delete<%= className %>: <%= deleteCommandClass %>,
	) {}

	@Query()
	async list() {
		return this.list<%= classNamePlural %>.execute();
	}

	@Query({ input: z.object({ id: z.string().uuid() }) })
	async getById(@Input('id') id: string) {
		return this.get<%= className %>ById.execute(id);
	}

	@Mutation({ input: create<%= className %>Schema })
	async create(@Input() input: z.infer<typeof create<%= className %>Schema>) {
		return this.create<%= className %>.execute(input);
	}

	@Mutation({ input: z.object({ id: z.string().uuid(), data: update<%= className %>Schema }) })
	async update(
		@Input('id') id: string,
		@Input('data') data: z.infer<typeof update<%= className %>Schema>,
	) {
		return this.update<%= className %>.execute(id, data);
	}

	@Mutation({ input: z.object({ id: z.string().uuid() }) })
	async delete(@Input('id') id: string) {
		return this.delete<%= className %>.execute(id);
	}
}
<% } -%>
