---
to: "<%= generate.commands ? outputPaths.deleteCommand : '' %>"
force: true
---
<% if (outputPaths.deleteCommand) { -%>
/**
 * Delete <%= className %> Command
 * Generated by entity codegen - do not edit directly
 *
 * EXTENSION POINTS (add business logic here):
 * - Authorization: Check if user can delete this specific record
 * - Referential integrity: Check for dependent records, cascade or block
 * - Soft delete: Mark as deleted instead of hard delete
 * - Side effects: Emit events, clean up related data, notify subscribers
 * - Audit: Log deletion for compliance/debugging
 */

import { Inject, Injectable, NotFoundException } from '@nestjs/common';
import { <%= repositoryToken %> } from '<%= imports.constants %>';
import type { I<%= className %>Repository } from '<%= imports.domain %>';
import { <%= className %> } from '<%= imports.domain %>';

@Injectable()
export class <%= deleteCommandClass %> {
	constructor(
		@Inject(<%= repositoryToken %>)
		private readonly <%= camelName %>Repository: I<%= className %>Repository,
	) {}

	async execute(id: string): Promise<<%= className %>> {
		// TODO: Add pre-delete validation here
		// e.g., check for dependent records, verify user permissions

		const deleted = await this.<%= camelName %>Repository.delete(id);
		if (!deleted) {
			throw new NotFoundException(`<%= className %> with id ${id} not found`);
		}

		// TODO: Add post-delete side effects here (events, cleanup, etc.)

		return deleted;
	}
}
<% } -%>
