---
to: <%= basePaths.backendSrc %>/application/schemas/<%= name %>.dto.ts
force: true
---
/**
 * <%= className %> DTOs
 * Generated by entity codegen - do not edit directly
 */

import { z } from 'zod';
<% if (hasEntityRefFields) { -%>
import { entityTypeSchema } from '<%= locations.dbContextEngine.import %>';
<% } -%>

export const create<%= className %>Schema = z.object({
<% fields.forEach((field) => { -%>
<% let zodChain = field.zodType; -%>
<% if (field.type === 'string' && field.maxLength) { zodChain += `.max(${field.maxLength})`; } -%>
<% if (field.type === 'string' && field.minLength) { zodChain += `.min(${field.minLength})`; } -%>
<% if (['integer', 'decimal'].includes(field.type) && field.min !== undefined) { zodChain += `.min(${field.min})`; } -%>
<% if (['integer', 'decimal'].includes(field.type) && field.max !== undefined) { zodChain += `.max(${field.max})`; } -%>
<% if (field.choices) { zodChain = `z.enum([${field.choices.map(c => `'${c}'`).join(', ')}])`; } -%>
<% if (field.nullable) { zodChain += '.nullable()'; } -%>
<% if (!field.required) { zodChain += '.optional()'; } -%>
	<%- field.camelName %>: <%- zodChain %>,
<% }) -%>
});

export type Create<%= className %>Dto = z.infer<typeof create<%= className %>Schema>;

export const update<%= className %>Schema = z.object({
<% fields.forEach((field) => { -%>
<% let zodChain = field.zodType; -%>
<% if (field.type === 'string' && field.maxLength) { zodChain += `.max(${field.maxLength})`; } -%>
<% if (field.type === 'string' && field.minLength) { zodChain += `.min(${field.minLength})`; } -%>
<% if (['integer', 'decimal'].includes(field.type) && field.min !== undefined) { zodChain += `.min(${field.min})`; } -%>
<% if (['integer', 'decimal'].includes(field.type) && field.max !== undefined) { zodChain += `.max(${field.max})`; } -%>
<% if (field.choices) { zodChain = `z.enum([${field.choices.map(c => `'${c}'`).join(', ')}])`; } -%>
<% if (field.nullable) { zodChain += '.nullable()'; } -%>
	<%- field.camelName %>: <%- zodChain %>.optional(),
<% }) -%>
});

export type Update<%= className %>Dto = z.infer<typeof update<%= className %>Schema>;
