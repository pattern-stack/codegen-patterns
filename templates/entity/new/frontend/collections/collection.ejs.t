---
to: <%= locations.frontendCollections.path %>/<%= name %>.ts
force: true
---
/**
 * <%= className %> Collection
 * Generated by entity codegen - do not edit directly
 *
 * Real-time synced collection using TanStack DB + Electric SQL
 */

import { <%= camelName %>Schema } from '<%= locations.dbEntities.import %>/<%= name %>';
import { electricCollectionOptions } from '@tanstack/electric-db-collection';
import { createCollection } from '@tanstack/react-db';
import { getAuthorizationHeader } from './auth';

export const <%= camelName %>Collection = createCollection(
	electricCollectionOptions({
		id: '<%= plural %>',
		shapeOptions: {
			url: new URL(
				'/v1/shape',
				typeof window !== 'undefined'
					? window.location.origin
					: 'http://localhost:5173',
			).toString(),
			params: {
				table: '<%= plural %>',
			},
			headers: {
				Authorization: getAuthorizationHeader,
			},
			parser: {
				timestamptz: (date: string) => new Date(date),
			},
		},
		schema: <%= camelName %>Schema,
		getKey: (item) => item.id,
	}),
);
